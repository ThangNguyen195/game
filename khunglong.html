<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game T·∫∑ng Qu√† Troll</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            user-select: none;
            overflow: hidden;
            margin: 0; padding: 0;
        }

        h1 { margin-top: 20px; color: #333; }

        #game-board {
            width: 800px;
            height: 300px;
            border-bottom: 2px solid #555;
            margin: 20px auto;
            position: relative;
            background-color: white;
            overflow: hidden;
        }

        /* --- NH√ÇN V·∫¨T (CH·ªàNH S·ª¨A ·ªû ƒê√ÇY N·∫æU C·∫¶N) --- */
        #dino {
            width: 60px;
            height: 60px;
            /*background-color: #333;  N·∫øu c√≥ ·∫£nh nh√¢n v·∫≠t th√¨ thay url v√†o d∆∞·ªõi */
            background-image: url('nhanvat.png');
            background-size: cover;
            position: absolute;
            bottom: 0; left: 50px;
            z-index: 5;
        }

        .cactus {
            width: 25px; height: 45px;
            background-color: #28a745;
            position: absolute; bottom: 0; left: 800px;
            border-radius: 4px 4px 0 0;
        }

        .jump-animation { animation: jump 0.5s linear; }

        @keyframes jump {
            0% { bottom: 0; }
            30% { bottom: 130px; }
            70% { bottom: 130px; }
            100% { bottom: 0; }
        }

        #score-board {
            position: absolute; top: 10px; right: 20px;
            font-size: 24px; font-weight: bold; color: #555;
        }

        #game-over-msg {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            display: none; z-index: 10;
        }

        /* --- S·ª¨A ƒêO·∫†N N√ÄY --- */
#victory-screen {
    position: fixed; /* <--- Quan tr·ªçng: ƒê·ªïi t·ª´ 'absolute' th√†nh 'fixed' */
    
    top: 0; 
    left: 0; 
    
    width: 100vw; /* <--- Chi·ªÅu r·ªông b·∫±ng 100% m√†n h√¨nh thi·∫øt b·ªã */
    height: 100vh; /* <--- Chi·ªÅu cao b·∫±ng 100% m√†n h√¨nh thi·∫øt b·ªã */
    
    background-color: rgba(255, 255, 255, 0.98); /* M√†u n·ªÅn tr·∫Øng m·ªù */
    
    display: none;
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    
    z-index: 9999; /* <--- TƒÉng s·ªë n√†y l√™n cao ƒë·ªÉ ƒë·∫£m b·∫£o n√≥ ƒë√® l√™n t·∫•t c·∫£ */
}

/* --- S·ª¨A TH√äM ƒêO·∫†N N√ÄY ƒê·ªÇ ·∫¢NH TO H∆†N CHO ƒê·∫∏P --- */
#reward-img {
    max-width: 600px; /* <--- TƒÉng t·ª´ 300px l√™n 600px (ho·∫∑c to h∆°n t√πy th√≠ch) */
    max-height: 70vh; /* Gi·ªõi h·∫°n chi·ªÅu cao kh√¥ng qu√° 70% m√†n h√¨nh */
    
    border: 5px solid #ff6b6b;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

        .gift-container { display: flex; gap: 30px; margin-top: 20px; }

        .gift-box {
            font-size: 60px; cursor: pointer;
            transition: transform 0.2s;
            animation: float 2s infinite ease-in-out;
        }
        .gift-box:hover { transform: scale(1.2); }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #gift-reveal {
            display: none;
            flex-direction: column; align-items: center;
            margin-top: 10px;
        }

        #reward-img {
            max-width: 300px; max-height: 200px;
            border: 5px solid #ff6b6b;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        button {
            padding: 10px 20px; font-size: 16px; cursor: pointer;
            background-color: #333; color: white; border: none;
            margin-top: 15px; border-radius: 5px;
        }
        button:hover { background-color: #555; }
        
        #btn-real-gift { background-color: #ff4757; } /* N√∫t xem qu√† th·∫≠t m√†u ƒë·ªè n·ªïi b·∫≠t */

    </style>
</head>
<body>

    <h1>Game T·∫∑ng Qu√† üéÅ</h1>
    <p>ƒê·∫°t <b>25 ƒëi·ªÉm</b> ƒë·ªÉ nh·∫≠n qu√† b√≠ m·∫≠t!</p>

    <div id="game-board">
        <div id="score-board">ƒêi·ªÉm: 0</div>
        <div id="dino"></div>
        
        <div id="game-over-msg">
            <h2 style="color: red;">Th·ª≠ l·∫°i nh√©!</h2>
            <button onclick="restartGame()">Ch∆°i l·∫°i</button>
        </div>

        <div id="victory-screen">
            <h2 id="victory-title" style="color: #ff6b6b;">üéâ CH√öC M·ª™NG! üéâ</h2>
            <p id="instruction-text">Ch·ªçn m·ªôt h·ªôp qu√† may m·∫Øn:</p>
            
            <div class="gift-container" id="gift-selection">
                <div class="gift-box" onclick="openGift(1)">üéÅ</div>
                <div class="gift-box" onclick="openGift(2)">üéÅ</div>
                <div class="gift-box" onclick="openGift(3)">üéÅ</div>
            </div>

            <div id="gift-reveal">
                <img id="reward-img" src="" alt="Ph·∫ßn th∆∞·ªüng">
                <p id="reward-text" style="font-weight: bold; font-size: 18px; margin-top: 10px; color: #333;"></p>
                
                <button id="btn-real-gift" onclick="showRealGift()">üéÅ M·ªü qu√† th·∫≠t c∆°!</button>
                <button id="btn-restart" onclick="location.reload()" style="display:none">Ch∆°i l·∫°i t·ª´ ƒë·∫ßu</button>
            </div>
        </div>
    </div>

    <script>
        const dino = document.getElementById("dino");
        const board = document.getElementById("game-board");
        const scoreText = document.getElementById("score-board");
        const gameOverMsg = document.getElementById("game-over-msg");
        const victoryScreen = document.getElementById("victory-screen");
        const giftSelection = document.getElementById("gift-selection");
        const giftReveal = document.getElementById("gift-reveal");
        const rewardImg = document.getElementById("reward-img");
        const rewardText = document.getElementById("reward-text");
        const btnRealGift = document.getElementById("btn-real-gift");
        const btnRestart = document.getElementById("btn-restart");
        const victoryTitle = document.getElementById("victory-title");

        let isJumping = false;
        let isGameOver = false;
        let isVictory = false;
        let score = 0;
        let gameSpeed = 10;
        let cactusTimeoutId = null; 
        let currentGiftId = 0; // Bi·∫øn l∆∞u h·ªôp qu√† ƒëang ch·ªçn

        // --- C·∫§U H√åNH QU√Ä T·∫∂NG (S·ª¨A ·ªû ƒê√ÇY) ---
        const rewards = {
            1: { 
                fakeImg: "fake1.jpg", 
                fakeMsg: "Ch√∫c m·ª´ng! B·∫°n nh·∫≠n ƒë∆∞·ª£c... m·ªôt c√∫ l·ª´a :))",
                realImg: "real1.jpg", 
                realMsg: "ƒê√πa th√¥i, ƒë√¢y m·ªõi l√† qu√† n√®! üíñ"
            },
            2: { 
                fakeImg: "fake2.jpg", 
                fakeMsg: "Qu√† n√†y nh√¨n h∆°i... l·∫° nh·ªâ? ü§£",
                realImg: "real2.jpg", 
                realMsg: "B·∫•t ng·ªù ch∆∞a! M√£i iu! üåü"
            },
            3: { 
                fakeImg: "fake3.jpg", 
                fakeMsg: "B·∫°n ƒë√£ quay v√†o √¥ m·∫•t l∆∞·ª£t! (Gi·ª°n ƒë√≥)",
                realImg: "real3.jpg", 
                realMsg: "Happy Birthday / Best Wishes! üéÇ"
            }
        };

        // --- GAME LOGIC ---
        function jump(e) {
            if ((e.code === "Space" || e.type === "touchstart") && !isJumping && !isGameOver && !isVictory) {
                isJumping = true;
                dino.classList.add("jump-animation");
                setTimeout(() => { dino.classList.remove("jump-animation"); isJumping = false; }, 500);
            }
        }
        document.addEventListener('keydown', jump);
        document.addEventListener('touchstart', jump);

        function createCactus() {
            if (isGameOver || isVictory) return;
            const cactus = document.createElement("div");
            cactus.classList.add("cactus");
            board.appendChild(cactus);
            let cactusPosition = 800;
            let passed = false;

            let timerId = setInterval(() => {
                if (isGameOver || isVictory) { clearInterval(timerId); return; }
                cactusPosition -= gameSpeed;
                cactus.style.left = cactusPosition + "px";

                let dinoRect = dino.getBoundingClientRect();
                let cactusRect = cactus.getBoundingClientRect();

                if (dinoRect.right > cactusRect.left + 10 && dinoRect.left < cactusRect.right - 10 && dinoRect.bottom > cactusRect.top) {
                    clearInterval(timerId);
                    handleGameOver();
                }

                if (cactusPosition < 50 && !passed) {
                    score++;
                    scoreText.innerText = "ƒêi·ªÉm: " + score;
                    passed = true;
                    if (score >= 5) handleVictory(); // ƒêI·ªÇM TH·∫ÆNG
                }

                if (cactusPosition < -50) { cactus.remove(); clearInterval(timerId); }
            }, 20);
            let randomTime = Math.floor(Math.random() * 1000) + 1200;
            cactusTimeoutId = setTimeout(createCactus, randomTime);
        }

        function handleGameOver() {
            isGameOver = true;
            gameOverMsg.style.display = "block";
            dino.style.animation = "none";
        }

        function handleVictory() {
            isVictory = true;
            clearTimeout(cactusTimeoutId);
            let allCacti = document.querySelectorAll('.cactus');
            allCacti.forEach(c => c.remove());
            victoryScreen.style.display = "flex";
        }

        // --- LOGIC M·ªû QU√Ä ---
        
        // B∆∞·ªõc 1: M·ªü qu√† "Fake"
        function openGift(id) {
            currentGiftId = id; // L∆∞u l·∫°i ID ƒë·ªÉ d√πng cho b∆∞·ªõc 2
            
            giftSelection.style.display = "none";
            document.getElementById("instruction-text").style.display = "none";
            giftReveal.style.display = "flex";
            
            // Hi·ªán n·ªôi dung Fake
            const gift = rewards[id];
            rewardImg.src = gift.fakeImg;
            rewardText.innerText = gift.fakeMsg;
            
            // Hi·ªán n√∫t "M·ªü qu√† th·∫≠t", ·∫®n n√∫t "Ch∆°i l·∫°i"
            btnRealGift.style.display = "inline-block";
            btnRestart.style.display = "none";
        }

        // B∆∞·ªõc 2: M·ªü qu√† "Real"
        function showRealGift() {
            const gift = rewards[currentGiftId];
            
            // ƒê·ªïi sang ·∫£nh th·∫≠t
            rewardImg.src = gift.realImg;
            rewardText.innerText = gift.realMsg;
            
            // ƒê·ªïi ti√™u ƒë·ªÅ cho ho√†nh tr√°ng
            victoryTitle.innerText = "YEAHHH! QU√Ä X·ªäN ƒê√ÇY R·ªíI!";
            
            // ·∫®n n√∫t "M·ªü qu√† th·∫≠t", Hi·ªán n√∫t "Ch∆°i l·∫°i"
            btnRealGift.style.display = "none";
            btnRestart.style.display = "inline-block";
        }

        function restartGame() {
            location.reload(); // Load l·∫°i trang cho nhanh
        }

        createCactus();
    </script>
</body>
</html>